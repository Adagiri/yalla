type NewTripRequestPayload {
  tripId: ID!
  customerId: ID!
  customer: CustomerPartial!
  pickup: TripLocation!
  destination: TripLocation!
  estimatedFare: Float!
  distance: Float!
  duration: Int!
  requestedAt: DateTime!
  targetDriverId: ID!
  tripNumber: String!
  verificationPin: String!
}

type TripAcceptedPayload {
  tripId: ID!
  customerId: ID!
  driver: DriverPartial!
  estimatedArrivalTime: Int!
  acceptedAt: DateTime!
  tripNumber: String!
}

type TripStatusChangedPayload {
  trip: Trip!
  previousStatus: TripStatus
  updatedAt: DateTime!
}

type DriverLocationUpdatePayload {
  tripId: ID!
  driverId: ID!
  location: DriverLocationInfo!
  timestamp: DateTime!
}

type TripLifecycleUpdatePayload {
  tripId: ID!
  status: TripStatus!
  message: String
  timestamp: DateTime!

  # Optional data based on status
  trip: Trip
  driver: DriverPartial
  customer: CustomerPartial
  estimatedArrival: DateTime
  actualArrival: DateTime
  location: LocationCoordinate
  searchRadius: Float
  driversNotified: Int
  reason: String
  error: String
}

extend type Subscription {
  # Driver receives new trip requests
  newTripRequest(driverId: ID!): NewTripRequestPayload!

  # Customer gets notified when their trip is accepted
  tripAccepted(customerId: ID!): TripAcceptedPayload!

  # Real-time trip status updates for customers and drivers
  tripStatusChanged(tripId: ID!): TripStatusChangedPayload!

  # Customer tracks driver location during active trip
  driverLocationUpdate(tripId: ID!): DriverLocationUpdatePayload!

  # Trip lifecycle updates for real-time frontend updates
  tripLifecycleUpdate(tripId: ID!): TripLifecycleUpdatePayload!
}
